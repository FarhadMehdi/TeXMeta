%===============================================================================
% Zweck: KTR-Meta-Vorlage
%===============================================================================
\input{\meta/config/language}
\newif\ifgit
\newif\ifseminar
\newif\ifpresentation
\newif\ifthesis
% Input files from meta package
\IfFileExists{config/metainfo}{\input{config/metainfo}}{\gitfalse}
\input{\meta/config/packages}
\input{\meta/config/unibaColors}
\ifgit
  \newcommand{\gitkeys}{\gitAbbrevHash, \gitAuthorIsoDate, \gitAuthorName }
\fi

\ifpresentation
\usetheme{UniBa\ratio}
%\usefonttheme{
%	default | professionalfonts | serif |
%	structurebold | structureitalicserif |
%	structuresmallcapsserif
%}
\usefonttheme{professionalfonts}
%\useinnertheme{
%	circles | default | inmargin |
%	rectangles | rounded
%}
\useinnertheme{rectangles}
%\useoutertheme{
%	default | infolines | miniframes |
%	shadow | sidebar | smoothbars |
%	smoothtree | split | tree
%}
%\useoutertheme{split}
\setbeamercovered{transparent}

% Without navigation symbols
\beamertemplatenavigationsymbolsempty
\fi

\makeatletter
\hypersetup{pdftitle={\@title}, pdfauthor={\@author}, linktoc=page, pdfborder={0 0 0 [3 3]}, breaklinks=true, linkbordercolor=unibablueI, menubordercolor=unibablueI, urlbordercolor=unibablueI, citebordercolor=unibablueI, filebordercolor=unibablueI}
%% Define a new 'leo' style for the package that will use a smaller font.
\def\url@leostyle{%
  \@ifundefined{selectfont}{\def\UrlFont{\sf}}{\def\UrlFont{\small\ttfamily}}}
\makeatother
%% Now actually use the newly defined style.
\urlstyle{leo}

\graphicspath{{images/}{\meta/config/images/}{\meta/images}}

\ifpresentation
\else
\makeatletter
\renewcommand{\maketitle} {
\begin{titlepage}
\ifthesis
\ThisCenterWallPaper{1}{\meta/config/images/titlepage.pdf}

\setstretch{1.2}
\vspace*{55mm}
\begin{minipage}[t]{2cm}
\textsc{Thema:}
\end{minipage}
\begin{minipage}[t]{12cm}
\textbf{\Large \@title}\\[10mm]
\textbf{\large \@subtitle \normalsize}
\end{minipage}\\[25mm]
\centering
\Huge \textbf{\degree arbeit}\\
\vspace{1cm}
\Large
im Studiengang \studycourse\ der Fakultät Wirtschaftsinformatik und Angewandte Informatik der Otto-Friedrich-Universität Bamberg\\
\normalsize
\vfill
\begin{flushleft}
\begin{tabbing}
xxxxxxxxxxxxxxx\=xxxxxxxxxxxxxx\kill
Verfasser: \> \@author\\
Themensteller:\> \advisor \\
Abgabedatum:\> \@date\\
\end{tabbing}
\end{flushleft}
\else
  \centering
    \begin{minipage}[t]{16cm}
      \hfill
      \begin{minipage}{12cm}
            \centering
        \uni
        \\[12pt]%
        {\Large \chair\\[.5em]%
        \large \chairsub}%
      \end{minipage}
      \hfill
      \begin{minipage}{3cm}
        \includegraphics[height=28mm]{\meta/config/images/logo} %height=26mm
      \end{minipage}
    \end{minipage}\\[70pt]%[50pt]
    {\Large\bf \ifseminar\seminar\else\project\fi}\\[36pt]
    {\LARGE \@title}\\[80pt]
    \ifseminar%
    {\Large\bf \topic:}\\[36pt]
    {\LARGE\bf \subtitle}\\
    \fi%
    \vfill
    \begin{minipage}{\textwidth}
      \center
      \submitter:\\
      {\Large \@author \\[18pt]}
      \lsupervisor: \supervisor \\[12pt]
      Bamberg, \@date\\
      \semester
    \end{minipage}
\fi
\end{titlepage}
}
\makeatother
\fi

\renewcommand{\gitMarkFormat}{\color{unibagrayI}\ifpresentation\tiny\else\small\fi\sffamily}

\ifthesis
% Schönere Kapitel?
\renewcommand*{\chapterformat}{%
  \thechapter\enskip
  \textcolor{gray!50}{\rule[-\dp\strutbox]{2pt}{\baselineskip}}\enskip
}
\renewcommand{\headfont}{\normalfont\sffamily\itshape}    % Kolumnentitel serifenlos
\renewcommand{\pnumfont}{\normalfont\sffamily}    % Seitennummern serifenlos
\pagestyle{scrheadings}
%\pagestyle{scrplain}
\ihead[]{\headmark}              % Kolumnentitel immer oben innen
\chead[]{}                       % Mitte leer lassen
\ohead[\pagemark]{\pagemark}     % Seitennummern immer oben aussen
%\ohead[]{}
\ofoot[]{}                       % Seitennummern in der Fusszeile loeschen
\cfoot[]{\ifgit \gitMarkFormat{\gitMarkPref\,\textbullet{}\,Branch: \gitBranch\,@\,\gitAbbrevHash{} \textbullet{} Release:\gitReln{} (\gitAuthorDate)}\fi}                       % Seitennummern in der Fusszeile loeschen
\fi

\numberwithin{equation}{section}
%
%===============================================================================
% zentrale Layout-Angaben und Befehle
%===============================================================================
%
%#1 Breite
%#2 Datei (liegt im image Verzeichnis)
%#3 Beschriftung
%#4 Label fuer Referenzierung
\newcommand{\image}[4]{%
\begin{figure}[H]%
\centering%
\includegraphics[width=#1]{#2}%
\caption{#3}%
\label{#4}%
\end{figure}%
}

%#1 Datei (liegt im graphic Verzeichnis)
%#2 Beschriftung
%#3 Label fuer Referenzierung
%#4 Skalierungsfaktor
\newcommand{\scaletikzimage}[4]{%
\begin{figure}[H]%
\centering%
\scalebox{#4}{%
\IfFileExists{graphic/#1.tikz}{\input{graphic/#1.tikz}}{
\IfFileExists{\meta/exampleGraphic/#1.tikz}{\input{\meta/exampleGraphic/#1.tikz}}{%
\colorbox{red}{Put your tikz file in the \texttt{graphic} folder}%
}}}%
\caption{#2}%
\label{#3}%
\end{figure}
}

%#1 algorithm name
%#2 algorithm label
%#3 file name in code-folder
\newcommand{\pseudo}[3]{%
\small%
\begin{algorithm}[H]%
\caption{#1}%
\label{#2}%
\IfFileExists{code/#3.tex}{\input{code/#3.tex}}{%
\IfFileExists{\meta/exampleCode/#3.tex}{\input{\meta/exampleCode/#3.tex}}{%
\colorbox{red}{Put your code file in the \texttt{code} folder}%
}}%
\end{algorithm}%
\normalsize%
}

\ifthesis
\makeatletter
\newcommand{\erklaerung}{
\newpage
\section*{Eidesstattliche Erklärung}
\vspace{25mm}

Ich erkläre hiermit gemäß § 17 Abs. 2 APO, dass ich die vorstehende \degree arbeit selbständig verfasst und keine anderen als die angegebenen Quellen und Hilfsmittel benutzt habe.\\[20mm]

\begin{minipage}{0.4\textwidth}
\location , \@date \hfill \\
\textcolor{white}{M}
\end{minipage}
\begin{minipage}{0.6\textwidth}
\begin{flushright}
\begin{center}
\textcolor{white}{M}\ldots\ldots\ldots\ldots\ldots\ldots\ldots\ldots\ldots\ldots\ldots\ldots\\
\@author \vfill
\end{center}
\end{flushright}
\end{minipage}
\newpage
}
\makeatother
\fi
